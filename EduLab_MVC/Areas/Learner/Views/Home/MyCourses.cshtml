<script>
    tailwind.config = {
        darkMode: 'class',
    }
</script>
<style>
    @@import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap');

    body {
        font-family: 'Tajawal', sans-serif;
    }

    /* تخصيص شريط التمرير */
    ::-webkit-scrollbar {
        width: 8px;
    }

    ::-webkit-scrollbar-track {
        background: #f1f1f1;
    }

    ::-webkit-scrollbar-thumb {
        background: #c5c5c5;
        border-radius: 4px;
    }

        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

    .dark ::-webkit-scrollbar-track {
        background: #374151;
    }

    .dark ::-webkit-scrollbar-thumb {
        background: #6b7280;
    }

        .dark ::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }

    /* تأثيرات انتقالية */
    .transition-all {
        transition: all 0.3s ease;
    }
</style>
<body class="bg-gray-100 dark:bg-gray-900 transition-all duration-300">
    <!-- صفحة استمر في التعلم -->
    <div class="bg-white dark:bg-gray-900 min-h-screen">
        <!-- شريط التقدم العلوي -->
        <div class="bg-blue-600 text-white py-2 px-4 sticky top-0 z-50">
            <div class="container mx-auto flex justify-between items-center">
                <div class="flex items-center space-x-2 space-x-reverse">
                    <span class="text-sm font-medium">دورة البرمجة بلغة Python</span>
                    <span id="progress-percentage" class="text-xs bg-blue-700 px-2 py-1 rounded">78% مكتمل</span>
                </div>
                <div class="flex items-center space-x-4 space-x-reverse">
                    <button id="theme-toggle" class="text-white hover:text-blue-200 transition">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="text-white hover:text-blue-200 transition">
                        <i class="fas fa-times text-lg"></i>
                    </button>
                </div>
            </div>
            <div class="w-full bg-blue-700 h-1 mt-2">
                <div id="progress-bar" class="bg-white h-1 transition-all duration-500" style="width: 78%"></div>
            </div>
        </div>

        <div class="container mx-auto px-4 py-6">
            <div class="flex flex-col lg:flex-row gap-6">
                <!-- المحتوى الرئيسي (فيديو المحاضرة) -->
                <div class="lg:w-2/3">
                    <!-- مشغل الفيديو -->
                    <div class="bg-black rounded-lg overflow-hidden shadow-lg aspect-video relative" id="video-container">
                        <video class="w-full h-full" id="main-video" poster="https://img.freepik.com/free-photo/html-system-website-concept_23-2150376770.jpg">
                            <source src="#" type="video/mp4">
                            متصفحك لا يدعم تشغيل الفيديو
                        </video>

                        <div id="video-overlay" class="absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-70 transition-opacity">
                            <div class="text-center text-white">
                                <button id="play-button" class="bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-full mb-4 transform hover:scale-110 transition-transform">
                                    <i class="fas fa-play text-2xl"></i>
                                </button>
                                <p class="text-lg font-medium">انقر للبدء</p>
                            </div>
                        </div>

                        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4 opacity-0 hover:opacity-100 transition-opacity" id="video-controls">
                            <div class="flex items-center space-x-3 space-x-reverse mb-2">
                                <button id="video-play-pause" class="text-white">
                                    <i class="fas fa-pause"></i>
                                </button>
                                <div class="w-full bg-gray-600 h-2 rounded-full cursor-pointer" id="progress-container">
                                    <div class="bg-blue-600 h-2 rounded-full" style="width: 0%" id="video-progress"></div>
                                </div>
                                <div class="text-white text-sm" id="time-display">00:00 / 00:00</div>
                                <button id="mute-button" class="text-white">
                                    <i class="fas fa-volume-up"></i>
                                </button>
                                <button id="fullscreen-button" class="text-white">
                                    <i class="fas fa-expand"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- معلومات المحاضرة -->
                    <div class="mt-6 bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                        <div class="flex justify-between items-start mb-4">
                            <h2 class="text-xl font-bold text-gray-800 dark:text-white">مقدمة في لغة Python</h2>
                            <div class="flex items-center space-x-2 space-x-reverse">
                                <div class="rating" id="lecture-rating">
                                    <i class="far fa-star text-yellow-400 cursor-pointer" data-rating="1"></i>
                                    <i class="far fa-star text-yellow-400 cursor-pointer" data-rating="2"></i>
                                    <i class="far fa-star text-yellow-400 cursor-pointer" data-rating="3"></i>
                                    <i class="far fa-star text-yellow-400 cursor-pointer" data-rating="4"></i>
                                    <i class="far fa-star text-yellow-400 cursor-pointer" data-rating="5"></i>
                                </div>
                                <button class="text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400" id="bookmark-btn">
                                    <i class="far fa-bookmark text-xl"></i>
                                </button>
                                <button class="text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400">
                                    <i class="far fa-flag text-xl"></i>
                                </button>
                            </div>
                        </div>

                        <div class="flex flex-wrap gap-4 mb-4">
                            <span class="flex items-center text-sm text-gray-600 dark:text-gray-300">
                                <i class="fas fa-play-circle ml-2"></i>
                                15 دقيقة
                            </span>
                            <span class="flex items-center text-sm text-gray-600 dark:text-gray-300">
                                <i class="fas fa-download ml-2"></i>
                                موارد متاحة
                            </span>
                            <span class="flex items-center text-sm text-gray-600 dark:text-gray-300">
                                <i class="fas fa-chart-bar ml-2"></i>
                                اختبار قصير
                            </span>
                        </div>

                        <p class="text-gray-700 dark:text-gray-300 mb-6">
                            في هذه المحاضرة سنتعرف على أساسيات لغة Python وكيفية تهيئة البيئة البرمجية للبدء في كتابة الأكواد. سنغطي المفاهيم الأساسية مثل المتغيرات، أنواع البيانات، والعمليات الأساسية.
                        </p>

                        <!-- موارد المحاضرة -->
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">موارد المحاضرة</h3>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                    <div class="flex items-center">
                                        <i class="fas fa-file-pdf text-red-500 text-xl ml-3"></i>
                                        <span class="text-gray-700 dark:text-gray-300">ملخص المحاضرة.pdf</span>
                                    </div>
                                    <button class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                    <div class="flex items-center">
                                        <i class="fas fa-file-code text-blue-500 text-xl ml-3"></i>
                                        <span class="text-gray-700 dark:text-gray-300">أمثلة برمجية.zip</span>
                                    </div>
                                    <button class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- التنقل بين المحاضرات -->
                        <div class="flex justify-between mt-8">
                            <button class="flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                                <i class="fas fa-arrow-right ml-2"></i>
                                المحاضرة السابقة
                            </button>
                            <button class="flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                                المحاضرة التالية
                                <i class="fas fa-arrow-left mr-2"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- القائمة الجانبية للمحاضرات -->
                <div class="lg:w-1/3">
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                        <!-- رأس القائمة -->
                        <div class="bg-gray-50 dark:bg-gray-700 p-4 border-b border-gray-200 dark:border-gray-600">
                            <h3 class="font-bold text-gray-800 dark:text-white">محتوى الدورة</h3>
                            <div class="flex items-center mt-2 text-sm text-gray-600 dark:text-gray-300">
                                <span>22 محاضرة • 4 ساعات</span>
                                <span class="mx-2">•</span>
                                <span id="sidebar-progress">78% مكتمل</span>
                            </div>
                        </div>

                        <!-- محتوى القائمة -->
                        <div class="overflow-y-auto max-h-screen">
                            <!-- قسم 1 -->
                            <div class="border-b border-gray-200 dark:border-gray-600">
                                <div class="flex justify-between items-center p-4 bg-white dark:bg-gray-800 cursor-pointer section-header">
                                    <div class="flex items-center">
                                        <i class="fas fa-chevron-down text-gray-500 ml-2 section-icon"></i>
                                        <h4 class="font-semibold text-gray-800 dark:text-white">مقدمة إلى Python</h4>
                                    </div>
                                    <span class="text-sm text-gray-500">4/4 محاضرات • 30 دقيقة</span>
                                </div>

                                <div class="pl-8 pr-4 pb-2 section-content">
                                    <!-- محاضرة 1 -->
                                    <div class="flex items-center p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 mb-2 current-lecture">
                                        <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-blue-100 dark:bg-blue-800 rounded-full ml-3">
                                            <i class="fas fa-play text-blue-600 dark:text-blue-400 text-sm"></i>
                                        </div>
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-gray-800 dark:text-white">مقدمة في لغة Python</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">15 دقيقة</p>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <i class="fas fa-check-circle text-green-500"></i>
                                        </div>
                                    </div>

                                    <!-- محاضرة 2 -->
                                    <div class="flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 mb-2 lecture-item">
                                        <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded-full ml-3">
                                            <i class="fas fa-play text-gray-500 dark:text-gray-400 text-sm"></i>
                                        </div>
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-gray-800 dark:text-white">تهيئة البيئة البرمجية</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">10 دقيقة</p>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <div class="w-4 h-4 border-2 border-gray-300 dark:border-gray-600 rounded-full"></div>
                                        </div>
                                    </div>

                                    <!-- محاضرة 3 -->
                                    <div class="flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 mb-2 lecture-item">
                                        <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded-full ml-3">
                                            <i class="fas fa-play text-gray-500 dark:text-gray-400 text-sm"></i>
                                        </div>
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-gray-800 dark:text-white">أول برنامج لك</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">5 دقيقة</p>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <div class="w-4 h-4 border-2 border-gray-300 dark:border-gray-600 rounded-full"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- قسم 2 -->
                            <div class="border-b border-gray-200 dark:border-gray-600">
                                <div class="flex justify-between items-center p-4 bg-white dark:bg-gray-800 cursor-pointer section-header">
                                    <div class="flex items-center">
                                        <i class="fas fa-chevron-down text-gray-500 ml-2 section-icon"></i>
                                        <h4 class="font-semibold text-gray-800 dark:text-white">المتغيرات وأنواع البيانات</h4>
                                    </div>
                                    <span class="text-sm text-gray-500">5/6 محاضرات • 45 دقيقة</span>
                                </div>

                                <div class="pl-8 pr-4 pb-2 section-content">
                                    <!-- محاضرة 1 -->
                                    <div class="flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 mb-2 lecture-item">
                                        <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded-full ml-3">
                                            <i class="fas fa-play text-gray-500 dark:text-gray-400 text-sm"></i>
                                        </div>
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-gray-800 dark:text-white">المتغيرات في Python</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">12 دقيقة</p>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <div class="w-4 h-4 border-2 border-gray-300 dark:border-gray-600 rounded-full"></div>
                                        </div>
                                    </div>

                                    <!-- محاضرة 2 -->
                                    <div class="flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 mb-2 lecture-item">
                                        <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded-full ml-3">
                                            <i class="fas fa-play text-gray-500 dark:text-gray-400 text-sm"></i>
                                        </div>
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-gray-800 dark:text-white">أنواع البيانات الأساسية</p>
                                            <p class="text-xs text-gray-500 dark:text-gray-400">15 دقيقة</p>
                                        </div>
                                        <div class="flex-shrink-0">
                                            <div class="w-4 h-4 border-2 border-gray-300 dark:border-gray-600 rounded-full"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ملاحظات الطالب -->
                    <div class="mt-6 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4">
                        <div class="flex justify-between items-center mb-3">
                            <h3 class="font-bold text-gray-800 dark:text-white">ملاحظاتي</h3>
                            <span id="note-status" class="text-xs text-gray-500"></span>
                        </div>
                        <textarea class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"
                                  rows="4"
                                  placeholder="أضف ملاحظاتك عن هذه المحاضرة..."
                                  id="lecture-notes"></textarea>
                        <div class="flex justify-end mt-2">
                            <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition" id="save-notes">
                                حفظ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- نافذة التنبيه -->
    <div id="alert" class="fixed top-4 right-4 max-w-sm bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 border-l-4 border-green-500 transform translate-x-full transition-transform duration-300 z-50">
        <div class="flex items-start">
            <div class="flex-shrink-0">
                <i class="fas fa-check-circle text-green-500 text-xl"></i>
            </div>
            <div class="mr-3">
                <p class="font-medium text-gray-800 dark:text-white" id="alert-title">تم الحفظ بنجاح</p>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1" id="alert-message">تم حفظ ملاحظاتك بنجاح</p>
            </div>
            <button id="close-alert" class="mr-auto text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // عناصر DOM الرئيسية
            const video = document.getElementById('main-video');
            const videoOverlay = document.getElementById('video-overlay');
            const playButton = document.getElementById('play-button');
            const videoPlayPause = document.getElementById('video-play-pause');
            const videoProgress = document.getElementById('video-progress');
            const progressContainer = document.getElementById('progress-container');
            const timeDisplay = document.getElementById('time-display');
            const muteButton = document.getElementById('mute-button');
            const fullscreenButton = document.getElementById('fullscreen-button');
            const videoContainer = document.getElementById('video-container');
            const videoControls = document.getElementById('video-controls');
            const themeToggle = document.getElementById('theme-toggle');
            const saveNotesButton = document.getElementById('save-notes');
            const lectureNotes = document.getElementById('lecture-notes');
            const noteStatus = document.getElementById('note-status');
            const alert = document.getElementById('alert');
            const alertTitle = document.getElementById('alert-title');
            const alertMessage = document.getElementById('alert-message');
            const closeAlert = document.getElementById('close-alert');
            const progressBar = document.getElementById('progress-bar');
            const progressPercentage = document.getElementById('progress-percentage');
            const sidebarProgress = document.getElementById('sidebar-progress');
            const bookmarkBtn = document.getElementById('bookmark-btn');
            const ratingStars = document.querySelectorAll('.rating i');
            const sectionHeaders = document.querySelectorAll('.section-header');
            const lectureItems = document.querySelectorAll('.lecture-item');

            // حالة التطبيق
            let isVideoPlaying = false;
            let isVideoMuted = false;
            let isFullscreen = false;
            let notesSaveTimeout;
            let videoProgressInterval;
            let controlsTimeout;

            // تهيئة الفيديو
            video.volume = 0.8;

            // تحميل البيانات المحفوظة
            loadSavedData();

            // أحداث الفيديو
            playButton.addEventListener('click', playVideo);
            videoOverlay.addEventListener('click', playVideo);
            videoPlayPause.addEventListener('click', togglePlayPause);
            video.addEventListener('click', togglePlayPause);
            muteButton.addEventListener('click', toggleMute);
            fullscreenButton.addEventListener('click', toggleFullscreen);
            progressContainer.addEventListener('click', seekVideo);
            video.addEventListener('timeupdate', updateProgress);
            video.addEventListener('ended', videoEnded);

            // أحداث عناصر التحكم بالفيديو
            videoContainer.addEventListener('mousemove', showVideoControls);
            videoContainer.addEventListener('mouseleave', hideVideoControls);

            // أحداث أخرى
            themeToggle.addEventListener('click', toggleTheme);
            saveNotesButton.addEventListener('click', saveNotes);
            lectureNotes.addEventListener('input', debounceSaveNotes);
            closeAlert.addEventListener('click', hideAlert);
            bookmarkBtn.addEventListener('click', toggleBookmark);

            // أحداث التقييم
            ratingStars.forEach(star => {
                star.addEventListener('click', setRating);
                star.addEventListener('mouseover', hoverRating);
            });

            document.querySelector('.rating').addEventListener('mouseleave', resetRating);

            // أحداث الأقسام والمحاضرات
            sectionHeaders.forEach(header => {
                header.addEventListener('click', toggleSection);
            });

            lectureItems.forEach(item => {
                item.addEventListener('click', selectLecture);
            });

            // وظائف الفيديو
            function playVideo() {
                video.play();
                isVideoPlaying = true;
                videoOverlay.style.opacity = '0';
                setTimeout(() => {
                    videoOverlay.style.display = 'none';
                }, 300);
                videoPlayPause.innerHTML = '<i class="fas fa-pause"></i>';

                // محاكاة تقدم الفيديو (لأنه لا يوجد فيديو حقيقي)
                simulateVideoProgress();
            }

            function simulateVideoProgress() {
                clearInterval(videoProgressInterval);
                let progress = 0;

                videoProgressInterval = setInterval(() => {
                    if (progress < 100) {
                        progress += 0.1;
                        videoProgress.style.width = `${progress}%`;

                        // تحديث وقت الفيديو
                        const currentTime = (progress / 100) * 900; // 15 دقيقة = 900 ثانية
                        const minutes = Math.floor(currentTime / 60);
                        const seconds = Math.floor(currentTime % 60);
                        timeDisplay.textContent =
                            `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')} / 15:00`;
                    } else {
                        clearInterval(videoProgressInterval);
                    }
                }, 100);
            }

            function togglePlayPause() {
                if (isVideoPlaying) {
                    video.pause();
                    videoPlayPause.innerHTML = '<i class="fas fa-play"></i>';
                    clearInterval(videoProgressInterval);
                } else {
                    video.play();
                    videoPlayPause.innerHTML = '<i class="fas fa-pause"></i>';
                    simulateVideoProgress();
                }
                isVideoPlaying = !isVideoPlaying;
            }

            function toggleMute() {
                isVideoMuted = !isVideoMuted;
                video.muted = isVideoMuted;
                muteButton.innerHTML = isVideoMuted ?
                    '<i class="fas fa-volume-mute"></i>' :
                    '<i class="fas fa-volume-up"></i>';
            }

            function toggleFullscreen() {
                if (!isFullscreen) {
                    if (videoContainer.requestFullscreen) {
                        videoContainer.requestFullscreen();
                    } else if (videoContainer.webkitRequestFullscreen) {
                        videoContainer.webkitRequestFullscreen();
                    } else if (videoContainer.msRequestFullscreen) {
                        videoContainer.msRequestFullscreen();
                    }
                    fullscreenButton.innerHTML = '<i class="fas fa-compress"></i>';
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    } else if (document.webkitExitFullscreen) {
                        document.webkitExitFullscreen();
                    } else if (document.msExitFullscreen) {
                        document.msExitFullscreen();
                    }
                    fullscreenButton.innerHTML = '<i class="fas fa-expand"></i>';
                }
                isFullscreen = !isFullscreen;
            }

            function seekVideo(e) {
                const progressWidth = this.clientWidth;
                const clickX = e.offsetX;
                const percent = (clickX / progressWidth) * 100;
                videoProgress.style.width = `${percent}%`;

                // تحديث وقت الفيديو بناء على النسبة
                const currentTime = (percent / 100) * 900; // 15 دقيقة = 900 ثانية
                video.currentTime = currentTime;
            }

            function updateProgress() {
                const percent = (video.currentTime / video.duration) * 100;
                videoProgress.style.width = `${percent}%`;

                const currentMinutes = Math.floor(video.currentTime / 60);
                const currentSeconds = Math.floor(video.currentTime % 60);
                const durationMinutes = Math.floor(video.duration / 60);
                const durationSeconds = Math.floor(video.duration % 60);

                timeDisplay.textContent =
                    `${currentMinutes.toString().padStart(2, '0')}:${currentSeconds.toString().padStart(2, '0')} / ${durationMinutes.toString().padStart(2, '0')}:${durationSeconds.toString().padStart(2, '0')}`;
            }

            function videoEnded() {
                isVideoPlaying = false;
                videoPlayPause.innerHTML = '<i class="fas fa-play"></i>';
                videoOverlay.style.display = 'flex';
                setTimeout(() => {
                    videoOverlay.style.opacity = '1';
                }, 10);

                // تحديث تقدم الدورة
                updateCourseProgress(5);
            }

            function showVideoControls() {
                videoControls.style.opacity = '1';
                clearTimeout(controlsTimeout);
                controlsTimeout = setTimeout(hideVideoControls, 3000);
            }

            function hideVideoControls() {
                videoControls.style.opacity = '0';
            }

            // وظائف الملاحظات
            function saveNotes() {
                const notes = lectureNotes.value;
                localStorage.setItem('lecture_notes', notes);

                // تحديث حالة الحفظ
                const now = new Date();
                noteStatus.textContent = `آخر حفظ: ${now.toLocaleTimeString('ar-EG')}`;

                // إظهار تنبيه النجاح
                showAlert('تم الحفظ بنجاح', 'تم حفظ ملاحظاتك بنجاح', 'success');
            }

            function debounceSaveNotes() {
                clearTimeout(notesSaveTimeout);
                noteStatus.textContent = 'جاري الحفظ...';
                notesSaveTimeout = setTimeout(saveNotes, 2000);
            }

            function loadSavedData() {
                // تحميل الملاحظات
                const savedNotes = localStorage.getItem('lecture_notes');
                if (savedNotes) {
                    lectureNotes.value = savedNotes;
                    const savedTime = localStorage.getItem('lecture_notes_time');
                    if (savedTime) {
                        noteStatus.textContent = `آخر حفظ: ${savedTime}`;
                    }
                }

                // تحميل التقييم
                const savedRating = localStorage.getItem('lecture_rating');
                if (savedRating) {
                    setRatingStars(parseInt(savedRating));
                }

                // تحميل وضع الألوان
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'dark') {
                    document.documentElement.classList.add('dark');
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                } else {
                    document.documentElement.classList.remove('dark');
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                }

                // تحميل حالة الإشارة المرجعية
                const savedBookmark = localStorage.getItem('lecture_bookmarked');
                if (savedBookmark === 'true') {
                    bookmarkBtn.innerHTML = '<i class="fas fa-bookmark text-xl"></i>';
                }
            }

            // وظائف الواجهة
            function toggleTheme() {
                if (document.documentElement.classList.contains('dark')) {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('theme', 'light');
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                } else {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('theme', 'dark');
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                }
            }

            function toggleBookmark() {
                const isBookmarked = bookmarkBtn.querySelector('i').classList.contains('fas');

                if (isBookmarked) {
                    bookmarkBtn.innerHTML = '<i class="far fa-bookmark text-xl"></i>';
                    localStorage.setItem('lecture_bookmarked', 'false');
                    showAlert('تمت الإزالة', 'تمت إزالة المحاضرة من الإشارات المرجعية', 'info');
                } else {
                    bookmarkBtn.innerHTML = '<i class="fas fa-bookmark text-xl"></i>';
                    localStorage.setItem('lecture_bookmarked', 'true');
                    showAlert('تم الحفظ', 'تم إضافة المحاضرة إلى الإشارات المرجعية', 'success');
                }
            }

            function setRating(e) {
                const rating = parseInt(e.target.getAttribute('data-rating'));
                setRatingStars(rating);
                localStorage.setItem('lecture_rating', rating);
                showAlert('شكرًا للتقييم!', `قيمت هذه المحاضرة بـ ${rating} نجوم`, 'success');
            }

            function setRatingStars(rating) {
                ratingStars.forEach(star => {
                    const starRating = parseInt(star.getAttribute('data-rating'));
                    if (starRating <= rating) {
                        star.classList.remove('far');
                        star.classList.add('fas');
                    } else {
                        star.classList.remove('fas');
                        star.classList.add('far');
                    }
                });
            }

            function hoverRating(e) {
                const hoverRating = parseInt(e.target.getAttribute('data-rating'));
                resetRating();
                ratingStars.forEach(star => {
                    const starRating = parseInt(star.getAttribute('data-rating'));
                    if (starRating <= hoverRating) {
                        star.classList.add('text-yellow-500');
                    }
                });
            }

            function resetRating() {
                const currentRating = localStorage.getItem('lecture_rating') || 0;
                ratingStars.forEach(star => {
                    star.classList.remove('text-yellow-500');
                    const starRating = parseInt(star.getAttribute('data-rating'));
                    if (starRating <= currentRating) {
                        star.classList.add('text-yellow-400');
                    } else {
                        star.classList.add('text-yellow-400');
                    }
                });
            }

            function toggleSection(e) {
                // منع تنشيط الحدث عند النقر على العناصر الفرعية
                if (e.target.tagName === 'I' || e.target.tagName === 'SPAN') {
                    return;
                }

                const sectionContent = this.nextElementSibling;
                const icon = this.querySelector('.section-icon');

                if (sectionContent.style.display === 'none') {
                    sectionContent.style.display = 'block';
                    icon.classList.remove('fa-chevron-left');
                    icon.classList.add('fa-chevron-down');
                } else {
                    sectionContent.style.display = 'none';
                    icon.classList.remove('fa-chevron-down');
                    icon.classList.add('fa-chevron-left');
                }
            }

            function selectLecture() {
                // إزالة التركيز من المحاضرة الحالية
                document.querySelectorAll('.current-lecture').forEach(item => {
                    item.classList.remove('current-lecture');
                    item.classList.remove('bg-blue-50');
                    item.classList.remove('dark:bg-blue-900/20');
                    item.classList.add('hover:bg-gray-50');
                    item.classList.add('dark:hover:bg-gray-700');
                });

                // إضافة التركيز على المحاضرة المحددة
                this.classList.add('current-lecture');
                this.classList.add('bg-blue-50');
                this.classList.add('dark:bg-blue-900/20');
                this.classList.remove('hover:bg-gray-50');
                this.classList.remove('dark:hover:bg-gray-700');

                // إظهار رسالة
                showAlert('تم التبديل', 'جاري تحميل المحاضرة الجديدة...', 'info');

                // تحديث تقدم الدورة
                updateCourseProgress(2);
            }

            function updateCourseProgress(increment) {
                const currentProgress = parseInt(progressBar.style.width);
                let newProgress = currentProgress + increment;

                if (newProgress > 100) newProgress = 100;

                progressBar.style.width = `${newProgress}%`;
                progressPercentage.textContent = `${newProgress}% مكتمل`;
                sidebarProgress.textContent = `${newProgress}% مكتمل`;
            }

            // وظائف التنبيهات
            function showAlert(title, message, type = 'success') {
                // تعيين لون الحدود بناء على نوع التنبيه
                let borderColor = 'green';
                if (type === 'error') borderColor = 'red';
                if (type === 'warning') borderColor = 'yellow';
                if (type === 'info') borderColor = 'blue';

                alert.style.borderLeftColor = `var(--${borderColor}-500)`;
                alertTitle.textContent = title;
                alertMessage.textContent = message;

                // تغيير الأيقونة بناء على النوع
                let icon = 'fa-check-circle';
                if (type === 'error') icon = 'fa-exclamation-circle';
                if (type === 'warning') icon = 'fa-exclamation-triangle';
                if (type === 'info') icon = 'fa-info-circle';

                alert.querySelector('i').className = `fas ${icon} text-${borderColor}-500 text-xl`;

                // إظهار التنبيه
                alert.classList.remove('translate-x-full');

                // إخفاء التنبيه تلقائياً بعد 5 ثوان
                setTimeout(hideAlert, 5000);
            }

            function hideAlert() {
                alert.classList.add('translate-x-full');
            }

            // تهيئة إضافية عند تحميل الصفحة
            function initializePage() {
                // تعيين وقت随机 للمحاضرة
                timeDisplay.textContent = '00:00 / 15:00';

                // إخفاء عناصر التحكم بالفيديو بعد بضع ثوان
                controlsTimeout = setTimeout(hideVideoControls, 3000);

                // تعيين تاريخ لحالة الملاحظات
                if (noteStatus.textContent === '') {
                    noteStatus.textContent = 'لم يتم الحفظ بعد';
                }

                // طلب الإذن للإشعارات
                if ('Notification' in window && Notification.permission === 'default') {
                    Notification.requestPermission();
                }
            }

            initializePage();
        });
    </script>
</body>
